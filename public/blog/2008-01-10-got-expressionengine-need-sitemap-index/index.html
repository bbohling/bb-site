


    




<!DOCTYPE HTML>

<html>
    <head>
        
            <title>Got ExpressionEngine? Need a sitemap index? - Brandon Bohling</title>
        

        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="generator" content="Hugo 0.25.1" />
        


        
        
            
                <meta name="description" content="HTML5 UP theme, Future Imperfect with some extra goodies, ported by Julio Pescador. Powered by Hugo">
            
        

        

  <meta name="twitter:card" content="summary"/>



<meta name="twitter:text:title" content="Got ExpressionEngine? Need a sitemap index?"/>
<meta name="twitter:title" content="Got ExpressionEngine? Need a sitemap index?"/>
<meta name="twitter:description" content="If you have been developing web sites for a while you already undoubtedly know the importance of sitemaps. Most blog software, such as Wordpress, provide plugins to auto generate sitemaps, but I could not find one for ExpressionEngine so I am here to explain how to auto generate your own with ExpressionEngine.
To create a simple sitemap for a SINGLE blog in ExpressionEngine you can follow the instructions explained here."/>
<meta name="twitter:site" content="@julio_pescador"/>

        <meta property="og:title" content="Got ExpressionEngine? Need a sitemap index?" />
<meta property="og:description" content="If you have been developing web sites for a while you already undoubtedly know the importance of sitemaps. Most blog software, such as Wordpress, provide plugins to auto generate sitemaps, but I could not find one for ExpressionEngine so I am here to explain how to auto generate your own with ExpressionEngine.
To create a simple sitemap for a SINGLE blog in ExpressionEngine you can follow the instructions explained here." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/blog/2008-01-10-got-expressionengine-need-sitemap-index/" />



<meta property="article:published_time" content="2008-01-10T00:00:00&#43;00:00"/>
<meta property="article:modified_time" content="2008-01-10T00:00:00&#43;00:00"/>











        
<meta itemprop="name" content="Got ExpressionEngine? Need a sitemap index?">
<meta itemprop="description" content="If you have been developing web sites for a while you already undoubtedly know the importance of sitemaps. Most blog software, such as Wordpress, provide plugins to auto generate sitemaps, but I could not find one for ExpressionEngine so I am here to explain how to auto generate your own with ExpressionEngine.
To create a simple sitemap for a SINGLE blog in ExpressionEngine you can follow the instructions explained here.">


<meta itemprop="dateModified" content="2008-01-10T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="788">



<meta itemprop="keywords" content="technology,blogging," />

        

        

        
        
            
        

        
        
            <link rel="stylesheet" href="/css/google-font.css" />
            <link rel="stylesheet" href="/css/font-awesome.min.css" />
            <link rel="stylesheet" href="/css/main.css" />
            <link rel="stylesheet" href="/css/add-on.css" />
            <link rel="stylesheet" href="/css/monokai-sublime.css">
        

        

        
        
        
    </head>
    <body>

        
        <div id="wrapper">

    
<header id="header">
    
        <h2><a href="/">Future Imperfect</i></a></h2>
    

    <nav class="links">
        <ul>
            
                <li>
                    <a href="/blog">
                        
                            <i class="fa fa-newspaper-o">&nbsp;</i>Blog
                    </a>
                </li>
            
                <li>
                    <a href="/categories">
                        Categories
                    </a>
                </li>
            
                <li>
                    <a href="/about">
                        About
                    </a>
                </li>
            
        </ul>
    </nav>
    <nav class="main">
        <ul>
            
            <li class="search">
                <a class="fa-search" href="#search">Search</a>
                <form id="search" method="get" action="//google.com/search">
                    <input type="text" name="q" placeholder="Search" />
                    <input type="hidden" name="q" value="site:http://localhost:1313/">
                </form>
            </li>
            <li class="menu">
                <a class="fa-bars" href="#menu">Menu</a>
            </li>
        </ul>
    </nav>
</header>


<section id="menu">

    
        <section>
            <form class="search" method="get" action="//google.com/search">
                <input type="text" name="q" placeholder="Search" />
                <input type="hidden" name="q" value="site:http://localhost:1313/">
            </form>
        </section>

    
        <section>
            <ul class="links">
                
                    <li>
                        <a href="/blog">
                            <h3>
                                
                                    <i class="fa fa-newspaper-o">&nbsp;</i>
                                
                                Blog
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/categories">
                            <h3>
                                
                                Categories
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/about">
                            <h3>
                                
                                About
                            </h3>
                        </a>
                    </li>
                
            </ul>
        </section>

    
        <section>
            <ul class="links">
                <header>
                    <h3>Recent Posts</h3>
                </header>
                
                    
                

                
            </ul>
        </section>

    
        
</section>

    
    <div id="main">
        <article class="post">
            
            <header>
    <div class="title">
        
            <h1><a href="http://localhost:1313/blog/2008-01-10-got-expressionengine-need-sitemap-index/">Got ExpressionEngine? Need a sitemap index?</a></h1>
            
        
        
    </div>
</header>

            <div id="content">
                

<p>If you have been developing web sites for a while you already
undoubtedly know <a href="http://www.google.com/support/webmasters/bin/answer.py?hl=en&amp;answer=40318" title="Why should I have a sitemap">the importance of sitemaps</a>. Most blog software,
such as <a href="http://wordpress.org/" title="WordPress">Wordpress</a>, provide plugins to <a href="http://www.arnebrachhold.de/projects/wordpress-plugins/google-xml-sitemaps-generator/" title="Google (XML) Sitemaps Generator for WordPress">auto generate sitemaps</a>,
but I could not find one for <a href="http://www.expressionengine.com" title="ExpressionEngine - the best CMS available">ExpressionEngine</a> so I am here to
explain how to auto generate your own with ExpressionEngine.</p>

<p>To create a simple sitemap for a SINGLE blog in ExpressionEngine you can
follow the <a href="http://expressionengine.com/wiki/Google_Sitemaps/" title="Create a Google Sitemap for EE">instructions explained here</a>. However, our site has
multiple blogs so I needed to use a <a href="http://www.sitemaps.org/protocol.php#index" title="Sitemap Index format">sitemap index</a>, which required a
bit more effort. First, I will summarize the steps.</p>

<ol>
<li>Create a sitemap for each blog.</li>
<li>Create a sitemap-[blog-name].php (like sitemap-word.php) file for
each blog in web root</li>
<li>Create a sitemap.php file</li>
<li>Update your .htaccess file if necessary</li>
<li>Validate with Google webmaster tools</li>
</ol>

<h3 id="step-1-create-a-sitemap-template-for-each-blog">Step 1: Create a sitemap template for each blog</h3>

<p>In this step you need to create a template page for each blog. This page
generates a sitemap for a particular blog. The code I use is below.
Note: You will need to change the two variables to meet your
requirements. In addition, you need to change the loc tag to match the
URL to your blog.</p>

<pre><code>{assign_variable:master_weblog_name=&quot;the_word&quot;}{assign_variable:template_group_name=&quot;word&quot;}
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;urlset xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
	xsi:schemaLocation=&quot;http://www.sitemaps.org/schemas/sitemap/0.9
	http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd&quot;
	xmlns=&quot;http://www.sitemaps.org/schemas/sitemap/0.9&quot;&gt; 
	&lt;url&gt; 
		&lt;loc&gt;http://ebohling.com/word/&lt;/loc&gt; 
		&lt;lastmod&gt;{exp:stats}{last_entry_date format=&quot;%Y-%m-T;%H:%i:%s%Q&quot;}{/exp:stats}&lt;/lastmod&gt; 
		&lt;changefreq&gt;always&lt;/changefreq&gt; 
		&lt;priority&gt;1.0&lt;/priority&gt; 
	&lt;/url&gt; 
	 {exp:weblog:entries weblog=&quot;{master_weblog_name}&quot; limit=&quot;30&quot; 
		disable=&quot;categories|custom_fields|member_data|pagination|trackbacks&quot; rdf=&quot;off&quot; dynamic=&quot;off&quot; status=&quot;Open&quot;} 
	 &lt;url&gt; 
		&lt;loc&gt;{title_permalink=&quot;{template_group_name}&quot;}&lt;/loc&gt; 
		&lt;lastmod&gt;{gmt_edit_date format='%Y-%m-T;%H:%i:%s%Q'}&lt;/lastmod&gt; 
		&lt;changefreq&gt;weekly&lt;/changefreq&gt; 
		&lt;priority&gt;0.8&lt;/priority&gt; 
	 &lt;/url&gt; 
	 {/exp:weblog:entries} 
	 {exp:weblog:entries weblog=&quot;{master_weblog_name}&quot; offset=&quot;30&quot; 
		limit=&quot;500&quot; disable=&quot;categories|custom_fields|member_data|pagination|trackbacks&quot; rdf=&quot;off&quot; dynamic=&quot;off&quot; status=&quot;Open&quot;} 
	 &lt;url&gt; 
		&lt;loc&gt;{title_permalink=&quot;{template_group_name}&quot;}&lt;/loc&gt; 
		&lt;lastmod&gt;{gmt_edit_date format='%Y-%m-T;%H:%i:%s%Q'}&lt;/lastmod&gt; 
		&lt;changefreq&gt;monthly&lt;/changefreq&gt; 
		&lt;priority&gt;0.5&lt;/priority&gt; 
	 &lt;/url&gt; 
	 {/exp:weblog:entries} 
&lt;/urlset&gt;
</code></pre>

<h3 id="step-2-create-a-php-sitemap-file-for-each-blog">Step 2: Create a PHP sitemap file for each blog</h3>

<p>In this step you need to use an FTP client, web administration page, or
whatever you do to create files on your web server. In this case, you
will need to create some files in your site’s root directory (EE’s
installation directory). For me, that is public_html.</p>

<p>You can use whatever naming convention you want, but I chose to use:
sitemap-[blog-name].php. So I created three files for my site:
sitemap-action.php, sitemap-word.php, sitemap-bryce.php. Each file will
contain code that looks like this:</p>

<pre><code>&lt;?php 
// Prevent content to be cached 
header(&quot;Expires: Mon, 26 Jul 1997 05:00:00 GMT&quot;); // Content was generated on past 
header(&quot;Last-Modified: &quot; . gmdate(&quot;D, d M Y H:i:s&quot;) . &quot; GMT&quot;); //Content is always modified 

// Inform user agent that content is XML and is UTF-8 encoded 
header('Content-type: text/xml; charset=UTF-8'); 

// Read content from template and show it 
@readfile ('http://ebohling.com/word/sitemap/'); 
?&gt;
</code></pre>

<p>Note: you will need to change the readfile string to match the URL to
your sitemap in Step 1.</p>

<h3 id="step-3-create-a-sitemap-php-file">Step 3: Create a sitemap.php file</h3>

<p>Again, using the tool you used in Step 2, create a sitemap.php file and
use similar code as follows:</p>

<pre><code>&lt;?php 
// Prevent content to be cached 
header(&quot;Expires: Mon, 26 Jul 1997 05:00:00 GMT&quot;); // Content was generated on past 
header(&quot;Last-Modified: &quot; . gmdate(&quot;D, d M Y H:i:s&quot;) . &quot; GMT&quot;); //Content is always modified 

// Inform user agent that content is XML and is UTF-8 encoded 
header(&amp;apos;Content-type: text/xml; charset=UTF-8&amp;apos;); 

echo &quot;&lt;sitemapindex xmlns=&quot;http://www.sitemaps.org/schemas/sitemap/0.9&quot;&gt;&quot;;
echo &quot;&lt;sitemap&gt;&quot;;
echo &quot;&lt;loc&gt;http://ebohling.com/sitemap-action.php&lt;/loc&gt;&quot;;
echo &quot;&lt;lastmod&gt;&quot; . date(DATE_ATOM,mktime(0,0,0,10,3,1975)) . &quot;&lt;/lastmod&gt;&quot;;
echo &quot;&lt;/sitemap&gt;&quot;;
echo &quot;&lt;sitemap&gt;&quot;;
echo &quot;&lt;loc&gt;http://ebohling.com/sitemap-word.php&lt;/loc&gt;&quot;;
echo &quot;&lt;lastmod&gt;&quot; . date(DATE_ATOM,mktime(0,0,0,10,3,1975)) . &quot;&lt;/lastmod&gt;&quot;;
echo &quot;&lt;/sitemap&gt;&quot;;
echo &quot;&lt;/sitemapindex&gt;&quot;;
?&gt;
</code></pre>

<p>Make sure you the loc tags to match the URLs to your PHP sitemap files
that you created in Step 2.</p>

<h3 id="step-4-update-your-htaccess-file-if-necessary">Step 4: Update your .htaccess file if necessary</h3>

<p>If you are using an .htaccess file to remove index.php, then you will
need to update this file. There are many ways to implement this feature
as explained on <a href="http://expressionengine.com/wiki/Remove_index.php_From_URLs/" title="ExpressionEngine wiki - Remove index.php from URL">ExpressionEngine&rsquo;s wiki</a>,
so my sample code may not work for you. But with a little effort,
hopefully you will be able to apply the idea to your particular
implementation.</p>

<pre><code>RewriteEngine On
RewriteCond $1 !^(galleries|css|images|corelib|themes|favicon.ico|robots.txt|index.php|phpinfo.php|sitemap.php|sitemap-word.php|sitemap-action.php) [NC]
RewriteRule ^(.*)$ /index.php?/$1 [L]
</code></pre>

<p>Note: corelib equates to ExpressionEngine&rsquo;s core library directory which you should have renamed on installation, so make sure you tweak accordingly. As well as your sitemap names.</p>

<h3 id="step-5-validate-sitemaps">Step 5: Validate Sitemaps</h3>

<p>First you will need to validate each of your sitemaps. I use the validation tool supplied by
<a href="http://www.xml-sitemaps.com/validate-xml-sitemap.html" title="XML-Sitemap Validator">XML-Sitemaps</a>.
The sitemaps you will need to validate are your sitemap-[blog-name].php (or whatever naming convention you used). So for me:
<a href="http://ebohling.com/sitemap-action.php">http://ebohling.com/sitemap-action.php</a>, <a href="http://ebohling.com/sitemap-bryce.php">http://ebohling.com/sitemap-bryce.php</a>, and <a href="http://ebohling.com/sitemap-word.php">http://ebohling.com/sitemap-word.php</a>. This will not only validate that
your sitemap is well-formed, but also that your code in your PHP file and .htaccess file is up to snuff. If you simply want to validate the
sitemap you can first validate using your template URL. For me, <a href="http://ebohling.com/word/sitemap">http://ebohling.com/word/sitemap</a>.</p>

<p>Unfortunately you CANNOT validate the sitemap index (<a href="http://ebohling.com/sitemap.php">http://ebohling.com/sitemap.php</a>) using this tool. You will need to use
<a href="http://www.google.com/webmasters/tools/" title="Google Webmaster Tools">Google&rsquo;s validtor</a>.</p>

<p>As you can see this wasn&rsquo;t exactly easy. Quite a few steps and a lot can go wrong at each step. Hopefully this will provide you a starting point
though and save you some time. Good luck!</p>

            </div>
        </article>
    </div>
    
<section id="sidebar">

    
        <section id="intro">
            
            
                
                    <a href="/" class="logo"><img src="/img/main/logo.jpg" alt="Hugo Future Imperfect" /></a>
                
            
            
                <header>
                    <h2>Hugo Future Imperfect</h2>
                    <p>Another fine responsive site template by <a href="http://html5up.net">HTML5 UP</a>. Ported by Julio Pescador with some extra goodies <i class='fa fa-hand-peace-o'></i></p>
                </header>
            
            <ul class="icons">
                
                
                    
<li><a href="//github.com/jpescador" target="_blank" title="GitHub" class="fa fa-github"></a></li>

















































<li><a href="//twitter.com/julio_pescador" target="_blank" title="Twitter" class="fa fa-twitter"></a></li>




                
            </ul>
        </section>

    
        <section id="recent-posts">
            <ul class="posts">
                <header>
                    <h3>Recent Posts</h3>
                </header>
                
                    
                

                
                    
                

                

                
            </ul>
        </section>

    
    
    
    
        <section id="categories">
            <ul class="posts">
                <header>
                    <h3><a href="/categories/">Categories</a></h3>
                </header>

                
                    
                

                
                    <li>
                        <article>
                            <header>
                                <a href="/categories/technology/">technology</a>
                                <span style="float:right;">42</span>
                            </header>
                        </article>
                    </li>
                
                    <li>
                        <article>
                            <header>
                                <a href="/categories/photography/">photography</a>
                                <span style="float:right;">18</span>
                            </header>
                        </article>
                    </li>
                
                    <li>
                        <article>
                            <header>
                                <a href="/categories/journal/">journal</a>
                                <span style="float:right;">13</span>
                            </header>
                        </article>
                    </li>
                
                    <li>
                        <article>
                            <header>
                                <a href="/categories/sustenance/">sustenance</a>
                                <span style="float:right;">6</span>
                            </header>
                        </article>
                    </li>
                
                    <li>
                        <article>
                            <header>
                                <a href="/categories/travel/">travel</a>
                                <span style="float:right;">5</span>
                            </header>
                        </article>
                    </li>
                
                    <li>
                        <article>
                            <header>
                                <a href="/categories/link/">link</a>
                                <span style="float:right;">2</span>
                            </header>
                        </article>
                    </li>
                
            </ul>
        </section>
    

    
        
        <section class="blurb">
            <h2>About</h2>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent tellus lacus, auctor vehicula molestie quis, tempor quis velit. Quisque in quam ac leo efficitur vulputate. Phasellus ullamcorper aliquam sodales. Maecenas sit amet condimentum ipsum. Proin sit amet ligula elit. Mauris.</p>

            <ul class="actions">
                <li><a href="/about/" class="button">Learn More</a></li>
            </ul>
        </section>
        

    
        <section id="footer">
            <ul class="icons">
                
                
                    
<li><a href="//github.com/jpescador" target="_blank" title="GitHub" class="fa fa-github"></a></li>

















































<li><a href="//twitter.com/julio_pescador" target="_blank" title="Twitter" class="fa fa-twitter"></a></li>




                
            </ul>

            <p class="copyright">&copy; Brandon Bohling. Design: <a href="http://html5up.net" target="_blank">HTML5 UP</a>. Ported by <a href="//github.com/jpescador" target="_blank">Julio Pescador</a>. Powered by <a href="//gohugo.io" target="_blank">Hugo</a></p>
        </section>

</section>

            </div>
        <a id="back-to-top" href="#" class="fa fa-arrow-up fa-border fa-2x"></a>
        

        
        
            
        

        
        
            <script src="/js/jquery.min.js"></script>
            <script src="/js/skel.min.js"></script>
            <script src="/js/util.js"></script>
            <script src="/js/main.js"></script>
            <script src="/js/backToTop.js"></script>
            <script src="/js/highlight.pack.js"></script>
        

        

            
            <script>hljs.initHighlightingOnLoad();</script>
            
    </body>
</html>

