{{ define "main" }}
<article class="post">
    <header class="post-header">
        {{ if .Draft }}
        <div class="draft-banner">Draft — Not published in production</div>
        {{ end }}
        <h1 class="post-title">{{ .Title }}</h1>
        <div class="post-meta">
            <time datetime="{{ .Date.Format "2006-01-02" }}">
                {{ .Date.Format "January 2, 2006" }}
            </time>
            {{ if and .Lastmod (ne .Lastmod .Date) }}
                <span class="meta-separator">·</span>
                <span class="last-updated">Updated {{ .Lastmod.Format "January 2, 2006" }}</span>
            {{ end }}
            {{ if .Params.categories }}
                <span class="meta-separator">·</span>
                <span class="post-categories">
                    {{ range $i, $cat := .Params.categories }}{{ if $i }}, {{ end }}<a href="{{ "categories/" | absURL }}{{ $cat | urlize }}/">{{ $cat }}</a>{{ end }}
                </span>
            {{ end }}
            {{ $wordCount := .WordCount }}
            {{ $readingTime := div $wordCount 200 }}
            {{ if lt $readingTime 1 }}{{ $readingTime = 1 }}{{ end }}
            <span class="meta-separator">·</span>
            <span class="reading-time">{{ $readingTime }} min read</span>
        </div>
    </header>

    <div class="post-content">
        {{ .Content }}
    </div>

    {{ if .Params.tags }}
    <footer class="post-footer">
        <div class="post-tags">
            {{ range .Params.tags }}
                <a href="{{ "tags/" | absURL }}{{ . | urlize }}/" class="tag">#{{ . }}</a>
            {{ end }}
        </div>
    </footer>
    {{ end }}

    {{ if eq .Section "posts" }}
    <nav class="post-navigation">
        {{ with .PrevInSection }}
            <a href="{{ .Permalink }}" class="prev-post">
                <span class="nav-label">← Previous</span>
                <span class="nav-title">{{ .Title }}</span>
            </a>
        {{ end }}
        {{ with .NextInSection }}
            <a href="{{ .Permalink }}" class="next-post">
                <span class="nav-label">Next →</span>
                <span class="nav-title">{{ .Title }}</span>
            </a>
        {{ end }}
    </nav>
    {{ end }}
</article>
{{ end }}
